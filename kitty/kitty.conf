# vim:fileencoding=utf-8:foldmethod=marker


include Catppuccin-Mocha.conf


font_size 12.0

font_family     FiraCode Nerd Font Mono

scrollback_lines 8000

confirm_os_window_close -1

paste_actions quote-urls-at-prompt

strip_trailing_spaces never

select_by_word_characters @-./_~?&=%+#

show_hyperlink_targets yes

remote_kitty if-needed

bell_on_tab "ğŸ”” "

input_delay 0
repaint_delay 2
sync_to_monitor no
wayland_enable_ime no

share_connections yes

remember_window_size  yes
initial_window_width  800
initial_window_height 600

enabled_layouts splits,stack


window_resize_step_cells 2
window_resize_step_lines 2



window_border_width 1pt
window_padding_width 5
macos_titlebar_color system
macos_window_resizable yes


visual_window_select_characters 1234567890ABCDEFGHIJKLMNOPQRSTUVWXYZ

confirm_os_window_close -1


allow_remote_control yes

hide_windRw_decorations        titlebar-only
tab_bar_edge                top
tab_bar_style               powerline
tab_powerline_style         slanted
tab_title_template "{fmt.fg.red}{bell_symbol}{activity_symbol}{fmt.fg.tab}{index}:{'ğŸ‡¿ }{title}"

background_opacity 0.85
background_blur 25


background_image none

#: Path to a background image. Must be in PNG format.
background_image_layout tiled



background_image_linear no

dynamic_background_opacity yes

# cursor
cursor_blink_interval 0
cursor_trail 3
cursor_trail_decay 0.1 0.4
# cursor_trail_start_threshold 2

detect_urls no
allow_hyperlinks yes
mouse_hide_wait 0.5


macos_option_as_alt yes 

startup_session session.conf



share_connections yes

# unmap left click for open link (easy miss click)
mouse_map left click ungrabbed no-op

#: Click the link under the mouse or move the cursor
mouse_map ctrl+left click ungrabbed mouse_handle_click selection link prompt

mouse_map ctrl+left press ungrabbed mouse_selection normal

mouse_map right press ungrabbed copy_to_clipboard

paste_actions quote-urls-at-prompt

kitty_mod ctrl+shift
#map kitty_mod+enter new_window
# disable this as can lead to window created by accident via press by ctrl+shift+v paste command and then press enter
map kitty_mod+enter no-op
map cmd+enter       no-op


#map kitty_mod+t new_tab_with_cwd
# map kitty_mod+t new_tab
map kitty_mod+t launch --location=hsplit
# new_tab will not keep cwd, use `new_tab_with_cwd` instead or `launch --cwd=current --type=tab`
# see https://sw.kovidgoyal.net/kitty/faq/#how-do-i-open-a-new-window-or-tab-with-the-same-working-directory-as-the-current-window
# tmux like tab create via `--cwd=last_reported`, warning: this need kitty `shell_integration enabled`
map ctrl+b>c launch --cwd=last_reported --type=tab

map ctrl+b>qoute set_tab_title

shell_integration enabled



#: Increase font size

map ctrl+equal  change_font_size all +2.0
map ctrl+plus   change_font_size all +2.0
map ctrl+kp_add change_font_size all +2.0


#: Decrease font size

map ctrl+minus       change_font_size all -2.0
map ctrl+kp_subtract change_font_size all -2.0


#: Reset font size

map ctrl+0 change_font_size all 0

# window
map ctrl+w>} next_window
map ctrl+w>{} previous_window
map ctrl+w>period move_window_forward
map ctrl+w>comma move_window_backward
map ctrl+w>t     new_tab
map ctrl+w>x     close_tab
map ctrl+w>X     close_window
map ctrl+w>]     next_tab
map ctrl+w+[     previous_tab

# split
map ctrl+w>minus launch --location=hsplit --cwd=last_reported
map ctrl+w>shift+minus launch --location=hsplit

map ctrl+w>backslash launch --location=vsplit --cwd=last_reported
map ctrl+w>shift+backslash launch --location=vsplit

map F7 layout_action rotate

map ctrl+left resize_window narrower
map ctrl+right resize_window wider
map ctrl+up resize_window taller
map ctrl+down resize_window shorter 3

map ctrl+w>h neighboring_window left
map ctrl+w>l neighboring_window right
map ctrl+w>k neighboring_window up
map ctrl+w>j neighboring_window down

# reset all windows in the tab to default sizes
map ctrl+home resize_window reset

map ctrl+w>q focus_visible_window

map ctrl+w>1 goto_tab 1
map ctrl+w>2 goto_tab 2
map ctrl+w>3 goto_tab 3
map ctrl+w>4 goto_tab 4
map ctrl+w>5 goto_tab 5
map ctrl+w>6 goto_tab 6
map ctrl+w>7 goto_tab 7
map ctrl+w>8 goto_tab 8
map ctrl+w>9 goto_tab 9
map ctrl+w>0 goto_tab 10


map ctrl+w>z toggle_fullscreen
map ctrl+w>r no-op
# hints
map ctrl+w>s kitten hints --alphabet asdfqwerzxcvjklmiuopghtybn1234567890 --customize-processing custom-hints.py
map ctrl+w>c kitten hints --alphabet asdfqwerzxcvjklmiuopghtybn1234567890 --customize-processing line-hints.py

# reload config
map ctrl+w>ctrl+r combine : load_config_file : launch --type=overlay sh -c 'echo "kitty config reloaded."; echo; read -r -p "Press Enter to exit"; echo ""'

map ctrl+shift+v paste_from_clipboard

# edit config
map ctrl+w>e no-op
map ctrl+w>shift+e launch --type=tab nvim ~/.config/kitty/kitty.conf

map ctrl+w>shift+d debug_config

map ctrl+w>ctrl+w send_text all \x01
map ctrl+w>c send_text all clear\n


map ctrl+w>space combine : save_as_session --save-only --use-foreground-process --relocatable .  : launch --type=overlay sh -c 'echo "kitty session saved."; echo; read -r -p "Press Enter to exit"; echo ""'

map ctrl+q close_os_window


shell_integration enabled
listen_on unix:/tmp/kitty
# kitty scrollback: https://github.com/mikesmithgh/kitty-scrollback.nvim
action_alias kitty_scrollback_nvim kitten kitty_scrollback_nvim.py

# Browse scrollback buffer in nvim
map kitty_mod+h kitty_scrollback_nvim
# Browse output of the last shell command in nvim
map kitty_mod+g kitty_scrollback_nvim --config ksb_builtin_last_cmd_output
# Show clicked command output in nvim
mouse_map ctrl+shift+right press ungrabbed combine : mouse_select_command_output : kitty_scrollback_nvim --config ksb_builtin_last_visited_cmd_output

# kitty grab: https://github.com/yurikhan/kitty_grab
map ctrl+w>v kitten kitty_grab/grab.py

